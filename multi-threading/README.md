## ë½(lock) ì²˜ë¦¬



## ë©€í‹° ìŠ¤ë ˆë“œ ëŒ€í‘œì  ë¬¸ì œ

- ë ˆì´ìŠ¤ ì»¨ë””ì…˜(race condition)
- ë°ë“œë½(deadlock)
- ìŠ¤íƒ€ë² ì´ì…˜(starvation)
- ë¼ì´ë¸Œ ë¡(live lock)
- ë‹¤ë¥¸ í˜•íƒœì˜ ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥í•œ ì˜¤ë¥˜(nondeterminism)



### ë ˆì´ìŠ¤ ì»¨ë””ì…˜

ê³µìœ  ë°ì´í„° ì²˜ë¦¬ ì‹œ ì•„ë¬´ëŸ° ë½ ì²˜ë¦¬ë¥¼ í•˜ì§€ ì•Šì„ ê²½ìš°, ë™ì‹œì— ì—¬ëŸ¬ ìŠ¤ë ˆë“œì—ì„œ ë°ì´í„°ë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆë‹¤. ê²½ìš°ì— ë”°ë¼ì„œ ë™ì‹œì— ìŠ¤ë ˆë“œê°€ ì²˜ë¦¬í•˜ëŸ¬ ë“¤ì–´ì™”ì„ ê²½ìš° ë°ì´í„°ê°€ ê¼¬ì—¬ì„œ ë¬´í•œ ëŒ€ê¸°í•˜ê±°ë‚˜ ë¬´í•œ ë£¨í”„ì— ë¹ ì§ˆ ìˆ˜ ìˆëŠ”ë° ì´ë¥¼ ë ˆì´ìŠ¤ ì»¨ë””ì…˜ì´ë¼ê³  í•œë‹¤.



### ë°ë“œë½

ë°ì´í„°ë¥¼ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ì„œ ê±°ëŠ” ë½ì—ì„œ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. ë‘ ê°œ ì´ìƒì˜ ìŠ¤ë ˆë“œì—ì„œ ì´ ë½ì´ ì„œë¡œ í’€ë¦¬ê¸°ë§Œì„ ê¸°ë‹¤ë¦¬ëŠ” ìƒí™©ì´ ë°œìƒí•  ìˆ˜ ìˆëŠ”ë°, ì´ëŸ¬í•œ ìƒí™©ì„ ë°ë“œë¡ì´ë¼ê³ í•œë‹¤.



### ìŠ¤íƒ€ë² ì´ì…˜

ì–´ë–»ê²Œ ë³´ë©´ ë°ë“œë½ê³¼ ë¹„ìŠ·í•˜ë‹¤. í•˜ì§€ë§Œ ê·¸ ì›ì¸ì€ ë°ë“œë½ê³¼ ë‹¤ë¥´ë‹¤. ìŠ¤íƒ€ë² ì´ì…˜ì€ ë©ˆì¶”ì–´ ìˆëŠ” ìŠ¤ë ˆë“œê°€ ì´ë¡ ì ìœ¼ë¡œ ìˆ˜í–‰ì€ í•  ìˆ˜ ìˆì§€ë§Œ CPUë¡œë¶€í„° ì¼ í•  ê¸°íšŒë¥¼ ë°›ì§€ ëª»í•˜ëŠ” ê²½ìš° ë•Œë¬¸ì— ë°œìƒí•œë‹¤. ìŠ¤ë ˆë“œì—ëŠ” ìš°ì„ ìˆœìœ„ë¼ëŠ” ê²ƒì´ ìˆë‹¤. ê·¸ ìš°ì„ ìˆœìœ„ê°€ ë‹¤ë¥¸ ìŠ¤ë ˆë“œë³´ë‹¤ ë‚®ìœ¼ë©´ í•´ë‹¹ ìŠ¤ë ˆë“œëŠ” ìŠ¤íƒ€ë² ì´ì…˜ì— ë¹ ì§ˆ ìˆ˜ ìˆë‹¤. ê·¸ë˜ì„œ ë³´í†µì€ ìŠ¤ë ˆë“œì˜ ìš°ì„ ìˆœìœ„ë¥¼ ê±´ë“œë¦¬ì§€ ì•ŠëŠ”ê²Œ ì¢‹ë‹¤.



### ë¼ì´ë¸Œ ë½

í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œì—ì„œ ë‹¤ë¥¸ ìŠ¤ë ˆë“œë¡œ ì‘ë‹µì„ ì£¼ëŠ” ê²½ìš°ê°€ ìˆë‹¤. ê·¸ëŸ°ë° ì‘ë‹µì„ ë°›ì€ ìŠ¤ë ˆë“œì—ì„œ ìš”ì²­í–ˆë˜ ìŠ¤ë ˆë“œë¡œ ë‹¤ì‹œ ìš”ì²­ì„ í•˜ëŠ” ì‘ì—…ì´ ê³„ì† ë°˜ë³µë  ìˆ˜ ìˆëŠ”ë°, ì´ê²ƒì„ ë¼ì´ë¸Œ ë½ì´ë¼ê³  í•œë‹¤. ë°ë“œë½ê³¼ì˜ ì°¨ì´ëŠ” ë°ë“œë½ì˜ ê²½ìš° CPUë¥¼ ì ìœ í•˜ì§€ ì•Šê³  ë©ˆì¶”ì–´ ë²„ë¦¬ì§€ë§Œ, ë¼ì´ë¸Œ ë½ì€ ë©ˆì¶”ì§€ ì•Šê³  ì§€ì†í•´ì„œ ìˆ˜í–‰í•˜ë¯€ë¡œ CPUê¹Œì§€ ì ìœ í•  í™•ë¥ ì´ ë†’ë‹¤. ê·¸ë ‡ê²Œ ë˜ë©´ CPU ì½”ì–´ í•˜ë‚˜ë¥¼ ëª¨ë‘ ì ìœ í•´ ë²„ë¦´ ìˆ˜ ìˆìœ¼ë‹ˆ, CPU ì‚¬ìš©ëŸ‰ë„ ê°™ì´ ëª¨ë‹ˆí„°ë§í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•œë‹¤.



## ë°ë“œë½ ì˜ˆì œ

ë‹¤ìŒì€ ì˜¤ë¼í´  íŠœí† ë¦¬ì–¼ì—ì„œ ì œê³µí•˜ëŠ” [ë°ë“œë½ ì˜ˆì œ](https://docs.oracle.com/javase/tutorial/essential/concurrency/deadlock.html)ì´ë‹¤.

```java
public class Deadlock {
    static class Friend {
        private final String name;

        public Friend(String name) {
            this.name = name;
        }

        public String getName() {
            return this.name;
        }

        public synchronized void bow(Friend bower) {
            System.out.format("%s: %s"
                            + "  has bowed to me!%n",
                    this.name, bower.getName());
            bower.bowBack(this);
        }

        public synchronized void bowBack(Friend bower) {
            System.out.format("%s: %s"
                            + " has bowed back to me!%n",
                    this.name, bower.getName());
        }
    }

    public static void main(String[] args) {
        final Friend alphonse = new Friend("Alphonse");
        final Friend gaston = new Friend("Gaston");

        new Thread(new Runnable() {
            public void run() { alphonse.bow(gaston); }
        }).start();

        new Thread(new Runnable() {
            public void run() { gaston.bow(alphonse); }
        }).start();
    }
}
```



ì´ë¥¼ ì‹¤í–‰í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•˜ê³  ë©ˆì¶° ìˆì„ ê²ƒì´ë‹¤.

```
Alphonse: Gaston  has bowed to me!
Gaston: Alphonse  has bowed to me!
```



> ğŸ” synchronized ë©”ì†Œë“œ
>
> 



## ì°¸ê³ 

- [ì˜¤ë¼í´ ë™ì‹œì„± íŠœí† ë¦¬ì–¼](https://docs.oracle.com/javase/tutorial/essential/concurrency/index.html)

